<h1 style="font-family:verdana;">Network Policy</h1>

<p style="font-family:verdana;" style="font-size:300%;">All connections are allowed for each pod in k8 to communicate with each other.</p>

<p style="font-family:verdana;" style="font-size:300%;"><strong>Ingress :</strong>Incoming connection to pod.</p>

<p style="font-family:verdana;" style="font-size:300%;">If we need a particular port to communicate with the pod , then we will write an ingress n/w policy , then all ingress communication will be blocked except the port which is defined.</p>

<p style="font-family:verdana;" style="font-size:300%;">And if suppose all egress communication is blocked from the pod still the outgoing communication  for that port will be allowed.</p>

<p style="font-family:verdana;" style="font-size:300%;">This blocks out all traffic first as mentioned below  in snip</p>

<img src="ingress1.JPG" width="500" height=350">

<p style="font-family:verdana;" style="font-size:300%;">Note that if a particular port is allowed on a pod then all the pod having label as<strong> role: db </strong>within cluster will communicate that particular pod  like below port 3306 is only allowed for ingress so it is allowed for all pods which are located in different namespace with in the cluster.</p>

<img src="ingress2.JPG" width="500" height=350">

<p style="font-family:verdana;" style="font-size:300%;">But if we wants to keep the connection for the same name space where the dd pod is located then we need to specify the namespace as below</p>

<img src="ingress3.JPG" width="500" height=350">

<p style="font-family:verdana;" style="font-size:300%;">And if there is no podselector mentioned then it will allow all the pod within the namespace to communicate the db pod on port 3306 like below </p>

<img src="ingress4.JPG" width="500" height=300">

<p style="font-family:verdana;" style="font-size:300%;">Let say you have an backup server outside the k/8 cluster and wants to do ingress communication with DB pod , then we will allow the ip block in that case.</p>

<img src="ingress5.JPG" width="500" height=350">

<p style="font-family:verdana;" style="font-size:300%;"><strong>Egress: </strong>Outgoing connect from pod.</p>

<p style="font-family:verdana;" style="font-size:300%;">Let say we have Db pod which need communicate with external backup server, (where let say db pod has agent which communicate with backup server), so we will allow the egress traffic communication like below : </p>

<img src="egress.JPG" width="500" height=350">

<p style="font-family:verdana;" style="font-size:300%;">Egress more example -----------------------------------------------.</p>
<img src="egress2.JPG" width="500" height=400">
<img src="egress1.JPG" width="400" height="500">